<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fetch and convert OpenAlex data — pro_fetch • openalexPro</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch and convert OpenAlex data — pro_fetch"><meta name="description" content="Convenience wrapper around pro_request,
pro_request_jsonl and
pro_request_jsonl_parquet."><meta property="og:description" content="Convenience wrapper around pro_request,
pro_request_jsonl and
pro_request_jsonl_parquet."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openalexPro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Workflow.html">Workflow using `openalexPro2`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rkrug/openalexPro/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fetch and convert OpenAlex data</h1>
      <small class="dont-index">Source: <a href="https://github.com/rkrug/openalexPro/blob/main/R/pro_fetch.R" class="external-link"><code>R/pro_fetch.R</code></a></small>
      <div class="d-none name"><code>pro_fetch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convenience wrapper around <code><a href="pro_request.html">pro_request</a></code>,
<code><a href="pro_request_jsonl.html">pro_request_jsonl</a></code> and
<code><a href="pro_request_jsonl_parquet.html">pro_request_jsonl_parquet</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pro_fetch</span><span class="op">(</span></span>
<span>  <span class="va">query_url</span>,</span>
<span>  pages <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  output <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mailto <span class="op">=</span> <span class="fu"><a href="oap_mail.html">oap_mail</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  api_key <span class="op">=</span> <span class="va">oap_apikey</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">count_only</span>,</span>
<span>  error_log <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-query-url">query_url<a class="anchor" aria-label="anchor" href="#arg-query-url"></a></dt>
<dd><p>The URL of the API query or a list of URLs returned from <code><a href="pro_query.html">pro_query()</a></code>.</p></dd>


<dt id="arg-pages">pages<a class="anchor" aria-label="anchor" href="#arg-pages"></a></dt>
<dd><p>The number of pages to be downloaded. The default is set to
1000, which would be 2,000,000 works. It is recommended to not increase it
beyond 1000 due to server load and to use the snapshot instead. If <code>NULL</code>,
all pages will be downloaded. Default: 1000.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>Directory where all intermediate (<code>json</code>,
<code>jsonl</code>) and final (<code>parquet</code>) results are stored.
If it does not exist, it is created. If <code>NULL</code>, a temporary
directory is created.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, <code>output</code> will be deleted if it already
exists.</p></dd>


<dt id="arg-mailto">mailto<a class="anchor" aria-label="anchor" href="#arg-mailto"></a></dt>
<dd><p>The email address of the user. See <code><a href="oap_mail.html">oap_mail()</a></code>.</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>The API key of the user. See <code><a href="oap_apikey.html">oap_apikey()</a></code>.</p></dd>


<dt id="arg-workers">workers<a class="anchor" aria-label="anchor" href="#arg-workers"></a></dt>
<dd><p>Number of parallel workers to use if <code>query_url</code> is a list. Defaults to 1.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical indicating whether to show verbose messages.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical default <code>TRUE</code> indicating whether to show a progress
bar.</p></dd>


<dt id="arg-count-only">count_only<a class="anchor" aria-label="anchor" href="#arg-count-only"></a></dt>
<dd><p>Do not use it here. The function will abort if it set to
<code>TRUE</code> and give a warning if <code>FALSE</code></p></dd>


<dt id="arg-error-log">error_log<a class="anchor" aria-label="anchor" href="#arg-error-log"></a></dt>
<dd><p>location of error log of API calls. (default: <code>NULL</code> (none)).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly, the normalized path of the <code>parquet</code> subfolder
inside <code>output</code>, i.e. the value returned by
<code><a href="pro_request_jsonl_parquet.html">pro_request_jsonl_parquet()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function</p><ul><li><p>downloads records from OpenAlex via <code><a href="pro_request.html">pro_request()</a></code> into a
<code>"json"</code> subfolder of <code>output</code>,</p></li>
<li><p>converts the JSON files to <code>jsonl</code> via
<code><a href="pro_request_jsonl.html">pro_request_jsonl()</a></code> into a <code>"jsonl"</code> subfolder, and</p></li>
<li><p>converts the jsonl files to an Apache Parquet dataset via
<code><a href="pro_request_jsonl_parquet.html">pro_request_jsonl_parquet()</a></code> into a <code>"parquet"</code> subfolder.</p></li>
</ul><p>This is a high-level helper for the common workflow of going from an
OpenAlex query URL to a local Parquet dataset in a single call.
In most cases, this function should be sufficient, but if more control is needed,
the individual functions have to be called separately.</p>
<p><strong>This function assumes <code>count_only == FALSE</code></strong></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rainer M Krug.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

